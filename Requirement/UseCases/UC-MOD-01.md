# UC-MOD-01: Xem Sơ đồ (PlantUML) tự động sinh

<table><tbody><tr><td>ID and Name:</td><td>UC-MOD-01: Xem Sơ đồ (PlantUML) tự động sinh</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>Created By:</td><td>&nbsp;</td><td>Date Created:</td><td>&nbsp;</td></tr><tr><td>Primary Actor:</td><td>Business Analyst (BA)</td><td>Secondary Actors:</td><td>&nbsp;</td></tr><tr><td>Description:</td><td colspan="3">Use case này cho phép BA xem một biểu diễn trực quan (Sơ đồ Hoạt động PlantUML) của một đối tượng yêu cầu. Sơ đồ này được hệ thống tự động sinh ra từ dữ liệu đã nhập trong "Form View" (theo <code>UC-DEV-01</code>). BA không cần viết code PlantUML.</td></tr><tr><td>Trigger:</td><td colspan="3">BA đang mở một đối tượng yêu cầu (ví dụ: <code>@UC001</code>) và nhấn vào tab "Diagram View".</td></tr><tr><td>Preconditions:</td><td colspan="3">1. BA đã mở một dự án (tham chiếu <code>UC-PM-02</code>).<br>2. BA đang xem một đối tượng có chứa luồng (flow) đã được nhập từ "Form View" (ví dụ: một Use Case).</td></tr><tr><td>Postconditions:</td><td colspan="3"><b>Thành công:</b> BA thấy được một sơ đồ trực quan, ở chế độ Read-only, phản ánh chính xác 100% logic đã nhập trong "Form View".<br><b>Thất bại:</b> Hệ thống hiển thị thông báo lỗi nếu không thể render sơ đồ.</td></tr><tr><td>Normal Flow:</td><td colspan="3">1.0. BA đang ở Tab của đối tượng (ví dụ: <code>UC001</code>), mặc định là "Form View".<br>2.0. BA nhấn vào tab "Diagram View".<br>3.0. Hệ thống kiểm tra xem có hình ảnh sơ đồ đã được cache (lưu đệm) cho phiên bản này của đối tượng không.<br>4.0. (Nếu không có cache) Hệ thống đọc file dữ liệu "Source of Truth" (ví dụ: <code>UC001.json</code>).<br>5.0. Hệ thống (Tự động hóa) phân tích dữ liệu (các bước, tác nhân, If-Then) và sinh ra một chuỗi (string) code PlantUML.<br>6.0. Hệ thống gọi thư viện PlantUML (Java) và truyền chuỗi code vào để render ra một hình ảnh (<code>BufferedImage</code>).<br>7.0. Hệ thống lưu hình ảnh này vào cache.<br>8.0. Hệ thống hiển thị hình ảnh sơ đồ trong Tab "Diagram View".</td></tr><tr><td>Alternative Flows:</td><td colspan="3"><b>1.0.A1: Dữ liệu Form thay đổi (Cần cập nhật sơ đồ)</b><br>1.1. BA chuyển về tab "Form View" (theo <code>UC-DEV-01</code>).<br>1.2. BA thay đổi logic (ví dụ: thêm một bước mới vào <code>Flow Builder</code>).<br>1.3. Hệ thống (Auto-save) lưu lại file <code>UC001.json</code>.<br>1.4. Hệ thống tự động xóa (invalidate) cache sơ đồ của <code>UC001</code>.<br>1.5. BA chuyển lại tab "Diagram View".<br>1.6. Use case tiếp tục từ bước 3.0 (Hệ thống không tìm thấy cache và phải render lại sơ đồ mới).</td></tr><tr><td>Exceptions:</td><td colspan="3"><b>1.0.E1: Lỗi render PlantUML</b><br>Tại bước 6.0:<br>6.1. Thư viện PlantUML báo lỗi (ví dụ: lỗi cú pháp do hệ thống sinh ra, hoặc lỗi thư viện).<br>6.2. Hệ thống hiển thị một hình ảnh báo lỗi (hoặc thông báo text) thay cho sơ đồ (ví dụ: "Không thể hiển thị sơ đồ. Lỗi: [Chi tiết lỗi]").<br>6.3. Use case kết thúc.</td></tr><tr><td>Priority:</td><td colspan="3">Rất Cao</td></tr><tr><td>Frequency of Use:</td><td colspan="3">Rất Cao (Hàng ngày)</td></tr><tr><td>Business Rules:</td><td colspan="3"><code>BR-MOD-01</code>: Chế độ xem "Diagram View" luôn là Read-only. Để chỉnh sửa luồng, BA bắt buộc phải quay lại "Form View".</td></tr><tr><td>Other Information:</td><td colspan="3">Tính năng này giải quyết vấn đề cốt lõi: đảm bảo tài liệu văn bản (Form) và sơ đồ (Diagram) luôn đồng nhất, vì sơ đồ được sinh ra từ văn bản.</td></tr><tr><td>Assumptions:</td><td colspan="3">Thư viện PlantUML (Java) đã được tích hợp thành công vào ứng dụng.</td></tr></tbody></table>

## Guideline

Định danh cho luồng bình thường của use case này là 1.0. Các luồng thay thế được xác định bằng cách tăng số ở bên phải dấu chấm, vì vậy luồng thay thế đầu tiên là 1.1, luồng thứ hai sẽ là 1.2, v.v. Cả luồng bình thường và luồng thay thế đều có thể có các ngoại lệ riêng. Ngoại lệ đầu tiên trên luồng bình thường của use case số 4 sẽ được gắn nhãn 1.0.E1. Ngoại lệ thứ hai cho luồng thay thế đầu tiên của use case này sẽ là 1.1.E2.