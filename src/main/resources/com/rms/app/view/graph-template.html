<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Graph</title>
    <script type="text/javascript" src="https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js"></script>
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #1E1F20; /* Khớp với dark-theme.css */
        }
        #graph {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="graph"></div>
<script type="text/javascript">
    // 2. Chờ (placeholder) dữ liệu JSON
    var nodesJson = %%NODES_JSON%%;
    var edgesJson = %%EDGES_JSON%%;

    // 3. Tạo các đối tượng DataSet của vis
    var nodes = new vis.DataSet(nodesJson);
    var edges = new vis.DataSet(edgesJson);

    // 4. Lấy (Get) DOM element
    var container = document.getElementById('graph');
    var data = {
        nodes: nodes,
        edges: edges
    };

    // 5. Cấu hình (Options) đồ thị (đã được tinh chỉnh (tune) cho dark mode)
    var options = {
        layout: {
            improvedLayout: false
        },
        nodes: {
            shape: 'box',
            font: {
                color: '#E3E3E3',
                size: 16
            },
            color: {
                border: '#007bff',
                background: '#2a2b2e',
                highlight: {
                    border: '#FFFFFF',
                    background: '#007bff'
                }
            },
            margin: 10
        },
        edges: {
            arrows: 'to',
            color: {
                color: '#888888',
                highlight: '#007bff',
                inherit: false
            },
            smooth: {
                type: 'cubicBezier',
                forceDirection: 'vertical',
                roundness: 0.4
            }
        },
        physics: {
            solver: 'forceAtlas2Based',
            forceAtlas2Based: {
                gravitationalConstant: -50,
                centralGravity: 0.01,
                springLength: 150,
                springConstant: 0.08,
                damping: 0.4
            },
            minVelocity: 0.75
        },
        interaction: {
            hover: true,
            tooltipDelay: 200
        }
    };

    // 6. Khởi tạo (Initialize) Đồ thị (Graph)
    var network = new vis.Network(container, data, options);
</script>
</body>
</html>